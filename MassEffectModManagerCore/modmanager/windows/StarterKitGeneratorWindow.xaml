<ui:ValidatableWindowBase x:Class="MassEffectModManagerCore.modmanager.windows.StarterKitGeneratorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MassEffectModManagerCore.modmanager.windows"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:converters="clr-namespace:MassEffectModManagerCore.modmanager.converters"
        xmlns:ui="clr-namespace:MassEffectModManagerCore.ui"
        mc:Ignorable="d"
        WindowStartupLocation="CenterOwner"
        Style="{StaticResource WindowStyle}"
        Title="DLC Mod Starter Kit Generator" Height="650" MinHeight="650" MinWidth="875" Width="875">
    <ui:ValidatableWindowBase.Resources>
        <converters:StarterKitRowHeightConverter x:Key="StarterKitRowHeightConverter"/>
        <converters:GameToVisibilityConverter x:Key="GameToVisibilityConverter"/>
        <Style x:Key="textBoxInError" TargetType="TextBox">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip"
              Value="{Binding RelativeSource={x:Static RelativeSource.Self},
              Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <ControlTemplate x:Key="DefaultErrorTemplate">
            <Grid x:Name="container">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <AdornedElementPlaceholder Grid.Column="0"
                                           Name="customAdorner"
                                           VerticalAlignment="Center" />

                <Border x:Name="ValidationErrorElement"
                        BorderBrush="#FFDB000C"
                        BorderThickness="1"
                        CornerRadius="1"
                        ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                    <Grid Background="Transparent"
                          HorizontalAlignment="Right"
                          Height="12"
                          Margin="1,-4,-4,0"
                          VerticalAlignment="Top"
                          Width="12">
                        <Path Data="M 1,0 L6,0 A 2,2 90 0 1 8,2 L8,7 z"
                              Fill="#FFDC000C"
                              Margin="1,3,0,0" />
                        <Path Data="M 0,0 L2,0 L 8,6 L8,8"
                              Fill="#ffffff"
                              Margin="1,3,0,0" />
                    </Grid>
                </Border>

                <Border Grid.Column="1"
                        Background="Red"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Width="15"
                        Height="15"
                        Margin="0,0,5,0"
                        CornerRadius="10"
                        ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                    <TextBlock Text="!"
                               VerticalAlignment="center"
                               HorizontalAlignment="center"
                               FontWeight="Bold"
                               Foreground="white" />
                </Border>
            </Grid>
        </ControlTemplate>

        <Style TargetType="{x:Type xctk:WatermarkTextBox}">
            <Setter Property="Validation.ErrorTemplate"
                    Value="{StaticResource DefaultErrorTemplate}" />
        </Style>
    </ui:ValidatableWindowBase.Resources>
    <xctk:BusyIndicator IsBusy="{Binding IsBusy}" BusyContent="{Binding BusyText}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="5"/>
                <RowDefinition Height="17"/>

                <!-- Mod Site -->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <!-- Mod Developer -->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <!-- Mod Site -->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <!-- Mod Internal Name DLC_MOD_VALUE -->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <!-- Internal Name  Not ME1 -->
                <RowDefinition Height="{Binding Game, Converter={StaticResource StarterKitRowHeightConverter}, ConverterParameter='Not_ME1'}"/>
                <!-- Internal TLK ID -->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <!-- DLC Module Number (ME2 Only) -->
                <RowDefinition Height="{Binding Game, Converter={StaticResource StarterKitRowHeightConverter}, ConverterParameter='ME2'}"/>
                <!-- Mount Priority -->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <!-- Mount Flag-->
                <RowDefinition Height="{Binding Path=(local:StarterKitGeneratorWindow.VisibleRowHeight), Mode=OneWay}"/>
                <RowDefinition Height="*" MinHeight="300"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>

                <RowDefinition Height="5"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="380"/>
                <ColumnDefinition Width="5"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="New DLC mod information" FontWeight="Bold" DockPanel.Dock="Top" Grid.Row="1" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Mod Name" Grid.Row="2" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Mod Developer" Grid.Row="3" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Mod Website/Nexusmods page" Grid.Row="4" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="DLC Folder Name Suffix" Grid.Row="5" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Internal Name" Grid.Row="6" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Internal Name TLK ID" Grid.Row="7" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="DLC Module Number" Grid.Row="8" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Mount Priority" Grid.Row="9" Grid.Column="1"/>
            <TextBlock VerticalAlignment="Center" Text="Mount Flag" Grid.Row="10" Grid.Column="1"/>

            <xctk:WatermarkTextBox Grid.Row="2" Grid.Column="2" Watermark="Faster Legs" Text="{Binding ModName, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <xctk:WatermarkTextBox Grid.Row="3" Grid.Column="2" Watermark="GatorZ" Text="{Binding ModDeveloper, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <xctk:WatermarkTextBox Grid.Row="4" Grid.Column="2" Watermark="https://nexusmods.com/masseffect2/..." Text="{Binding ModURL, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <xctk:WatermarkTextBox Grid.Row="5" Grid.Column="2" Watermark="FasterLegs" Text="{Binding ModDLCFolderName, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <xctk:WatermarkTextBox Grid.Row="6" Grid.Column="2" Watermark="Faster Legs DLC Module" Text="{Binding ModInternalName, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                                   Visibility="{Binding Game, Converter={StaticResource GameToVisibilityConverter}, ConverterParameter='Not_ME1'}"/>
            <xctk:WatermarkTextBox Grid.Row="7" Grid.Column="2" Watermark="1342879" Text="{Binding ModInternalTLKID, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <xctk:WatermarkTextBox Grid.Row="8" Grid.Column="2" Watermark="150" Text="{Binding ModDLCModuleNumber, Mode=TwoWay, ValidatesOnDataErrors=True}" 
                                   Visibility="{Binding Game, Converter={StaticResource GameToVisibilityConverter}, ConverterParameter='ME2'}"/>
            <xctk:WatermarkTextBox Grid.Row="9" Grid.Column="2" Watermark="3900" Text="{Binding ModMountPriority, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <xctk:WatermarkComboBox Grid.Row="10" Grid.Column="2" Watermark="Mount Flag" ItemsSource="{Binding DisplayedMountFlags}" DisplayMemberPath="DisplayString" SelectedValuePath="Selected" SelectedItem="{Binding ModMountFlag}"/>

            <xctk:WatermarkTextBox Watermark="{Binding DescriptionWatermarkText}" Grid.Row="11" Grid.Column="1" Grid.ColumnSpan="2" TextWrapping="Wrap" Text="{Binding ModDescription, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
            <TextBlock Grid.Column="1" Grid.ColumnSpan="2" Grid.Row ="12" Text="Ensure you are using a unique mount priority for your mod." TextWrapping="Wrap" Margin="0,3"/>
            <StackPanel Orientation="Horizontal" Grid.Column="1" Grid.Row="14">
                <StackPanel.Resources>
                    <Style x:Key="GameIcon" TargetType="RadioButton">
                        <Style.Triggers>
                            <Trigger Property="IsChecked" Value="False">
                                <Setter Property="Opacity" Value="0.25"/>
                            </Trigger>
                        </Style.Triggers>

                        <Setter Property="BorderThickness" Value="1"/>

                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="RadioButton">
                                    <Image Source="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}"/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </StackPanel.Resources>

                <RadioButton Name="ME1_RadioButton" Click="RadioButton_Click" Content="/images/gameicons/ME1_48.ico" Style="{StaticResource GameIcon}" BorderBrush="Red" Width="24" Height="24" />
                <RadioButton Name="ME2_RadioButton" Click="RadioButton_Click" Content="/images/gameicons/ME2_48.ico" Style="{StaticResource GameIcon}" BorderBrush="Orange" Width="24" Height="24" Margin="5,0"/>
                <RadioButton Name="ME3_RadioButton" Click="RadioButton_Click" Content="/images/gameicons/ME3_48.ico" Style="{StaticResource GameIcon}" BorderBrush="Green" Width="24" Height="24"/>
            </StackPanel>
            <TextBlock Text="Existing known DLC" FontWeight="Bold" DockPanel.Dock="Top" Grid.Row="1" Grid.Column="4"/>

            <DockPanel Grid.Column="4" Grid.RowSpan="15" Grid.Row="2" MinWidth="300" MaxHeight="600">
                <ListBox ItemsSource="{Binding CustomDLCMountsForGame}" SelectedItem="{Binding SelectedModMount}" DisplayMemberPath="StarterKitString">
                </ListBox>
            </DockPanel>

            <Button Content="Generate Starter Kit" Grid.Column="2" Grid.Row="14" Command="{Binding GenerateStarterKitCommand}"/>
        </Grid>
    </xctk:BusyIndicator>

</ui:ValidatableWindowBase>
